<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.8/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.8/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.8/dist/index.js"></script><script>(()=>{setTimeout(()=>{const{markmap:x,mm:K}=window,P=new x.Toolbar;P.attach(K);const F=P.render();F.setAttribute("style","position:absolute;bottom:20px;right:20px"),document.body.append(F)})})()</script><script>((b,L,T,D)=>{const H=b();window.mm=H.Markmap.create("svg#mindmap",(L||H.deriveOptions)(D),T)})(()=>window.markmap,null,{"content":"Construção de um Pipeline CI/CD (Baseado em Exemplos)","children":[{"content":"1. Definição e Configuração Inicial","children":[{"content":"1.1. Objetivos e Requisitos","children":[{"content":"Definir escopo da aplicação (Java, outros)","children":[],"payload":{"tag":"li","lines":"5,6"}},{"content":"Definir ambientes (dev, homolog, prod, etc)","children":[],"payload":{"tag":"li","lines":"6,7"}},{"content":"Estratégia de versionamento","children":[],"payload":{"tag":"li","lines":"7,8"}},{"content":"Nível de automação (CI/CD)","children":[],"payload":{"tag":"li","lines":"8,10"}}],"payload":{"tag":"h3","lines":"4,5"}},{"content":"1.2. Arquivo <code>.gitlab-ci.yml</code> Principal","children":[{"content":"<pre data-lines=\"20,28\"><code>*   **`variables`:** Definir variáveis globais\n    *   Perfis Spring (`SPRING_PROFILES_ACTIVE`)\n    *   Permissões de commit (`ALLOW_DEV_COMMIT`)\n    *   Controle de versão (`MAJOR_VERSION`)\n     * Credenciais do registro docker (`CI_REGISTRY_IMAGE`, `CI_REGISTRY_USER`, `CI_REGISTRY_PASSWORD`)\n     * Configurações do kubernetes (K8S_*)\n*   **`cache`:** Configurar o cache (ex: `.m2`, `target/`)\n*   **`stages`:** Definir etapas (ex: `validate`, `version`, `build`, `package`, `deploy`, `merge_request`)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"20,28"}}],"payload":{"tag":"h3","lines":"10,11"}}],"payload":{"tag":"h2","lines":"2,3"}},{"content":"2. Configuração do GitFlow (<code>.gitlab-ci-gitflow.yml</code>)","children":[{"content":"2.1. Estrutura de Branch","children":[{"content":"<pre data-lines=\"32,34\"><code>*   Configurar as branches de desenvolvimento, feature, hotfix e produção.\n*   Fluxo e dependências entre as branches\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"32,34"}}],"payload":{"tag":"h3","lines":"31,32"}},{"content":"2.2. Merge Requests","children":[{"content":"<pre data-lines=\"35,37\"><code>*  Regras de code review e automerge\n*  Regras de deleção das branches ao realizar o merge\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"35,37"}}],"payload":{"tag":"h3","lines":"34,35"}},{"content":"2.3. Versionamento","children":[{"content":"<pre data-lines=\"38,40\"><code>*   Arquivos de versionamento (ex: `version.properties`)\n*   Incremento de versão com base na estrategia definida\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"38,40"}}],"payload":{"tag":"h3","lines":"37,38"}}],"payload":{"tag":"h2","lines":"29,30"}},{"content":"3. Configuração do Deploy no Kubernetes (<code>cd.yaml</code>)","children":[{"content":"3.1. Contextos Kubernetes","children":[{"content":"Configurar os contextos (kb-dev, kb-prod, etc)<br>\n*   Domínios do Kubernetes<br>\n*   Loadbalancers","children":[],"payload":{"tag":"li","lines":"44,47"}}],"payload":{"tag":"h3","lines":"43,44"}},{"content":"3.2. Template Base","children":[{"content":"<pre data-lines=\"48,50\"><code>*   Definir as configuracoes base (`.k8s:default`).\n*   Namespaces e contextos do kubernetes\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"48,50"}}],"payload":{"tag":"h3","lines":"47,48"}},{"content":"3.3. Templates por Ambiente","children":[{"content":"<pre data-lines=\"51,53\"><code>*   Configurações especificas para kb-dev, kb-prod\n*    Definir o domínio (URL) e os recursos do cluster\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"51,53"}}],"payload":{"tag":"h3","lines":"50,51"}},{"content":"3.4. Deploy com Helm","children":[{"content":"Definir  como o helm será utilizado","children":[{"content":"Templates comuns <code>.k8s:tpl:run</code> e <code>.k8s:tpl:stop</code>","children":[],"payload":{"tag":"li","lines":"55,56"}},{"content":"Arquivos de valores <code>values.yaml</code>","children":[],"payload":{"tag":"li","lines":"56,58"}}],"payload":{"tag":"li","lines":"54,58"}}],"payload":{"tag":"h3","lines":"53,54"}}],"payload":{"tag":"h2","lines":"41,42"}},{"content":"4. Criação da Imagem Docker","children":[{"content":"4.1. <code>Dockerfile</code>","children":[{"content":"<pre data-lines=\"61,65\"><code>*   Imagem base (ex: `adoptopenjdk/openjdk11`, `maven`, `nodejs`)\n*   Variáveis de ambiente\n*   Copiar arquivos da aplicação para a imagem\n*  Definir o comando principal\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"61,65"}}],"payload":{"tag":"h3","lines":"60,61"}},{"content":"4.2.  Etapa de <code>package</code>","children":[{"content":"<pre data-lines=\"66,70\"><code>*  Login no registro docker (com variaveis `CI_REGISTRY_USER`, `CI_REGISTRY_PASSWORD`, `CI_REGISTRY`)\n*  Construir a imagem com base no `Dockerfile`\n   * Utilizar a tag latest para as branches develop, e o  `CI_COMMIT_TAG` para as branches de produção\n*  Enviar para o registro\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"66,70"}}],"payload":{"tag":"h3","lines":"65,66"}}],"payload":{"tag":"h2","lines":"58,59"}},{"content":"5. Etapas do Pipeline (<code>stages</code>)","children":[{"content":"5.1. <code>validate</code>","children":[{"content":"<pre data-lines=\"74,76\"><code>*   Verificar as regras de merge do projeto (`enable_merge`, `verify_ci_continue`).\n*   Ponto de partida do pipeline\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"74,76"}}],"payload":{"tag":"h3","lines":"73,74"}},{"content":"5.2. <code>version</code>","children":[{"content":"<pre data-lines=\"77,79\"><code>*   Atualizar a versão da aplicação.\n    * Usando o bump_version e definindo a `MAJOR_VERSION`\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"77,79"}}],"payload":{"tag":"h3","lines":"76,77"}},{"content":"5.3. <code>build</code>","children":[{"content":"<pre data-lines=\"80,82\"><code>*   Compilar o código da aplicação (ex: com Maven)\n     * Executar testes unitarios, quando necessário\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"80,82"}}],"payload":{"tag":"h3","lines":"79,80"}},{"content":"5.4. <code>package</code>","children":[{"content":"<pre data-lines=\"84,86\"><code>*  Construir e enviar a imagem docker para o registro\n* Definição de tags\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"84,86"}}],"payload":{"tag":"h3","lines":"83,84"}},{"content":"5.5.  <code>build_and_release</code>","children":[{"content":"<pre data-lines=\"87,89\"><code> * Etapa de pós build\n*  Criação de logs, changelogs, etc\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"87,89"}}],"payload":{"tag":"h3","lines":"86,87"}},{"content":"5.6.  <code>deploy</code>","children":[{"content":"<pre data-lines=\"90,94\"><code>*   Realizar o deploy no kubernetes utilizando o helm.\n*  Definição de valores para cada ambiente\n  *  Configuração da imagem, portas e recursos do cluster, variáveis de ambiente\n*   Utilizar secrets para valores mais sensiveis\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"90,94"}}],"payload":{"tag":"h3","lines":"89,90"}},{"content":"5.7. <code>merge_request</code>","children":[{"content":"<pre data-lines=\"95,98\"><code>*   Realizar o merge request para o ambiente necessário.\n   * Definição de variaveis para  `code review` e  `remoção da branch`.\n   * Processar o merge para as branches de desenvolvimento, hotfix, hotfeat e produção\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"95,98"}}],"payload":{"tag":"h3","lines":"94,95"}}],"payload":{"tag":"h2","lines":"71,72"}},{"content":"6. Scripts Auxiliares e External Resources","children":[{"content":"<pre data-lines=\"100,102\"><code>*   Analise e adaptação dos scripts e ferramentas (docker, helm, ansible, curl, etc)\n* Configuração dos recursos externos (registry, kubernetes, s3)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"100,102"}}],"payload":{"tag":"h2","lines":"99,100"}},{"content":"7. Segurança e Monitoramento","children":[{"content":"<pre data-lines=\"104,107\"><code> *   Gerenciar as credenciais de forma segura (secrets)\n * Configurar logs e monitoramento da execução do pipeline e da aplicação\n * Utilizar analise estatica de código, além de outros controles de qualidade.\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"104,107"}}],"payload":{"tag":"h2","lines":"103,104"}}],"payload":{"tag":"h1","lines":"0,1"}},null)</script>
</body>
</html>
